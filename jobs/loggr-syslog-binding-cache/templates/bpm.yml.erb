processes:
  - name: loggr-syslog-agent
    executable: /var/vcap/packages/syslog-agent/syslog-agent
    env:
      API_CA_FILE_PATH: "/var/vcap/jobs/loggr-syslog-agent/config/certs/api_ca.crt"
      API_CERT_FILE_PATH: "/var/vcap/jobs/loggr-syslog-agent/config/certs/api_client.crt"
      API_KEY_FILE_PATH: "/var/vcap/jobs/loggr-syslog-agent/config/certs/api_client.key"
      API_COMMON_NAME: <%= p("api.tls.cn") %>
      API_URL: <%= "https://#{link("cloud_controller").address}:9023" %>
      API_POLLING_INTERVAL: "<%= p("api.polling_interval") %>"
      API_BATCH_SIZE: "<%= p("api.batch_size") %>"

      CACHE_CA_FILE_PATH: "/var/vcap/jobs/loggr-syslog-agent/config/certs/loggregator_ca.crt"
      CACHE_CERT_FILE_PATH: "/var/vcap/jobs/loggr-syslog-agent/config/certs/syslog_agent.crt"
      CACHE_KEY_FILE_PATH: "/var/vcap/jobs/loggr-syslog-agent/config/certs/syslog_agent.key"
      CACHE_CIPHER_SUITES: "<%= p("tls.cipher_suites").split(":").join(",") %>"
      CACHE_PORT: <%= p("port") %>
      DEBUG_PORT: <%= p("debug_port") %>

      HTTP_ADDR: <%= p("external_addr") %>

      DRAIN_SKIP_CERT_VERIFY: "<%= p("drain_skip_cert_verify") %>"
